<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv=Content-Type content="text/html;charset=utf-8">
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <title>Openlayer</title>
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/build/ol.js"></script>
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/css/ol.css">
    <script
        src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js"></script>
    <script src="http://epsg.io/21461-1753.js" type="text/javascript"></script>
</head>
<!-- <style type="text/css">
    body,
    #map {
        border: 0px;
        margin: 0px;
        padding: 0px;
        width: 100%;
        height: 100%;
        font-size: 13px;
    }

    #map {
        width: 100%;
        height: 100% border:1px solid red;
    }
</style> -->

<body>
    <div id="map"></div>
</body>

</html>
<script type="text/javascript">
    var wfsVectorLayer = "";
    //初始化加载中心点
    // var extent= [374501.6659553682, 4581745.5281843925,625498.3340446339,5569829.626271695];  
    var center = ol.proj.transform([112.73, 38.42], "EPSG:4326", "EPSG:3857");
    // //加载google地图
    // var googleMapLayer = new ol.layer.Tile({  
    //     source: new ol.source.XYZ({  
    //       url: 'http://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0'
    //     })
    // });  

    //加载天地地图
    var tdRoadMapLayer = new ol.layer.Tile({
        source: new ol.source.XYZ({
            url: 'https://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=320109f58cbb412b31e478ddc5c651bd'
        }),
        isGroup: true,
        name: '天地图路网'
    });
    var tdFlagMapLayer = new ol.layer.Tile({
        source: new ol.source.XYZ({
            url: 'https://t0.tianditu.gov.cn/DataServer?T=cia_w&x={x}&y={y}&l={z}&tk=320109f58cbb412b31e478ddc5c651bd'
        }),
        isGroup: true,
        name: '天地图文字标注'
    });
    // //加载google交通标注图
    // var googleMapLayerTranffic = new ol.layer.Tile({  
    //     source: new ol.source.XYZ({  
    //         url:'http://www.google.cn/maps/vt?lyrs=h@189&gl=cn&x={x}&y={y}&z={z}'
    //     })
    // });  
    //new  地图对象
    var map = new ol.Map({
        // controls: ol.control.defaults().extend([
        //     new ol.control.ScaleLine()
        // ]),
        layers: [
            // googleMapLayer
            tdRoadMapLayer,
            tdFlagMapLayer
        ],
        view: new ol.View({
            // center: ol.proj.transform(ol.extent.getCenter(extent), 'EPSG:21461', 'EPSG:4326'),
            center: center,
            projection: 'EPSG:4326',
            zoom: 11
        }),
        target: 'map'
    });
    // addWms();

    //加载geoserver发布的地图
    function addWms() {
        wfsVectorLayer = new ol.layer.Tile({
            source: new ol.source.TileWMS({
                url: 'http://173.193.109.188:30657/geoserver/blockmap/wms?service=WMS&version=1.1.0&request=GetMap&layers=blockmap%3Acitypoint&bbox=75.98661000295887%2C18.237933465971842%2C131.1558999965443%2C52.3403555239211&width=768&height=474&srs=EPSG%3A4326',
                projection: 'EPSG:4326',
                params: {
                    'LAYERS': 'citypoint',
                    'VERSION': '1.1.0'
                }
            })
        });
        map.addLayer(wfsVectorLayer);
        //  map.addLayer(googleMapLayerTranffic);
    }
</script>